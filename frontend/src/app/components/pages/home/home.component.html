<div>
    <!-- CREATE USER -->
    <div>
        <form>
            <label for="">Nome</label>
            <input
                type="text"
                [(ngModel)]="newUser.name"
                name="name"
            >

            <div *ngIf="newUser.contacts.length > 0">
                <div *ngFor="let contact of newUser.contacts; let i = index">
                    <label for="">{{ typeContacts[contact['type']] }}</label>
                    <input
                        type="text"
                        [(ngModel)]="newUser.contacts[i].contact"
                        [name]="newUser.contacts[i].type + i"
                    >
                    <button (click)="deleteContactOnCreateUser(i)">Deletar</button>
                </div>
            </div>

            <label for="">Adicionar novo contato</label>
            <div>
                <select (change)="handleSelectedNewContact($event)">
                    <option value="email">{{ typeContacts['email'] }}</option>
                    <option value="cell">{{ typeContacts['cell'] }}</option>
                    <option value="homePhone">{{ typeContacts['homePhone'] }}</option>
                </select>
                <button (click)="addContactOnCreateUser()" >+</button>
            </div>
            
            <input
                type="submit"
                value="Salvar"
                (click)="onCreateUser(newUser)"
            >
        </form>
    </div>

    <!-- EDIT USER -->
    <ul>
        <li *ngFor="let user of users">
            <div *ngIf="isEdit && editUser._id === user._id; else edit">
                <form>
                    <label for="">Nome</label>
                    <input
                        type="text"
                        [(ngModel)]="user.name"
                        name="name"
                    >
                    <div *ngFor="let contact of editUser.contacts; let i = index">
                        <label for="">{{ typeContacts[contact['type']] }}</label>
                        <input
                            type="text"
                            [(ngModel)]="editUser.contacts[i].contact"
                            [name]="editUser.contacts[i].type + i"
                        >
                        <button (click)="deleteContactOnEdit(i)">Deletar</button>
                    </div>
                    <select (change)="handleSelectedNewContact($event)">
                        <option value="email">{{ typeContacts['email'] }}</option>
                        <option value="cell">{{ typeContacts['cell'] }}</option>
                        <option value="homePhone">{{ typeContacts['homePhone'] }}</option>
                    </select>
                    <button (click)="addContactOnEdit()" >+</button>
                    <input
                        type="submit"
                        value="Salvar"
                        (click)="onSaveUser(editUser)"
                    >
                </form>
            </div>
        
            <ng-template #edit>
                <p>Nome: {{ user.name }}</p>
                <div *ngFor="let contacts of user.contacts">
                    <p><span>{{ typeContacts[contacts['type']] }}</span>: {{contacts.contact}}</p>
                </div>

                <button (click)="onEditUser(user)">Editar</button>
                <button (click)="onRemoveUser(user)">Remover</button>
            </ng-template>
        </li>
    </ul>
</div>


